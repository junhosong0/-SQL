# JOIN
두 테이블을 묶는 조인. 두개의 테이블을 서로 묶어서 하나의 결과를 만들어 내는 것.
- 각각 테이블에 일부의 정보를 합쳐서 하나의 정보를 만들어 내고 싶을때 사용.
- 배송정보 테이블을 만들때 회원 테이블에서 회원 정보와 구매 테이블에서 상품 정보를 합쳐서 만들 수 있음.



## 내부조인 (INNER JOIN)
두 테이블을 연결할 때 가장 많이 사용 됨. 그냥 조인이라고 부르면 내부 조인을 의미 하는 것.

### 일대다 관계의 이해
두 테이블의 조인을 위해서는 테이블이 일대다(one to many)관계로 연결되어야 함. 'PK-FK 관계'라고 부르기도 함.
회원 테이블에서 아이디는 각각 유일하기 때문에 기본키(PK) 구매 테이블의 아이디는 여러개가 존재하기 때문에 외래키(FK)로 설정.
- 구매 테이블의 아이디를 PK로 설정하면 한 아이디당 구매를 한번밖에 못하게 된다.

![20240214_125816](https://github.com/junhosong0/MySQL/assets/117610783/347affa0-b0c8-4e2d-ba6b-ddd2e4752b1a)


조인은 3개 이상의 테이블로도 할 수 있지만 대부분은 2개로 조인 함.

내부조인 형식
```SQL
SELECT <열 목록>
FROM <첫 번째 테이블>
  INNER JOIN <두 번째 테이블>
  ON <조인될 조건>
[WHERE 검색 조건]
```

```SQL
USE market_db;

-- buy 테이블을 기준으로 mem_id가 GRL인 데이터 행을 member 테이블에서 찾아 inner join해라.
SELECT *
  FROM buy
    INNER JOIN member
    ON buy.mem_id = member.mem_id
  WHERE buy.mem_id = 'GRL';
```

![20240214_130709](https://github.com/junhosong0/MySQL/assets/117610783/3777a8e6-f974-417f-b118-91ac011c9fd8)

<br/>

WHERE절은 생략 가능 함. 조건 없이 전체 회원을 JOIN.
```SQL
SELECT *
  FROM buy
    INNER JOIN member
    ON buy.mem_id = member.mem_id;
```

![20240214_131115](https://github.com/junhosong0/MySQL/assets/117610783/aae1c7ce-00cb-4b03-8654-411135f6d293)

<br/>

```SQL
SELECT buy.mem_id, member.mem_name, buy.prod_name, member.addr, CONCAT(phon1, phone2) AS '연락처' -- 양쪽 테이블에 같은 이름의 컬럼이 있을 경우 어떤 테이블의 컬럼 아이디인지 특정해줘야 함 ex) buy.mem_id
  FROM buy
    INNER JOIN member
    ON buy.mem_id = member.mem_id;
```

```SQL
-- ALIAS 사용
SELECT B.mem_id, M.mem_name, B.prod_name, M.addr,
        CONCAT(phon1, phone2) AS '연락처'
  FROM buy B
    INNER JOIN member M
    ON B.mem_id = M.mem_id;
```

![20240214_131610](https://github.com/junhosong0/MySQL/assets/117610783/8d441c77-9a33-4be0-88b9-f3cbb3f57b7f)

<br/>



## 외부조인 (OUTER JOIN)
내부조인의 한계점: 양쪽 테이블에서 동시에 존재하는 것들만 조인이 가능함.
외부조인은 한쪽 테이블에 존재하지 않더라도 공백으로 조인시킬 수 있음.

```SQL
SELECT <열 목록>
FROM <첫 번째 테이블(LEFT 테이블)>
  <LEFT | RIGT | FULL> OUTER JOIN <두 번째 테이블(RIGHT 테이블)> -- LEFT를 사용하면 왼쪽을 기준으로 OUTER 조인 해준다는 뜻
  ON <조인될 조건>
[WHERE 검색 조건] ;
```

내역이 없는 데이터 셀은 NULL로 채워짐.
```SQL
SELECT M.mem_id, M.mem_name, B.prod_name, M.addr
  FROM member M
    LEFT OUTER JOIN buy B
    ON M.mem_id = B.mem_id
  ORDER BY M.mem_id;
```

![20240214_132736](https://github.com/junhosong0/MySQL/assets/117610783/b5fa4284-0f6f-430c-90ca-d67094bddda8)


```SQL

```





