
# 제약조건으로 테이블을 견고하게

제약조건: 테이블을 만들 때 테이블에 구조에 필요한 제약조건을 설정해 줌.
- **PK와 FK**: 대표적인 제약조건
- **고유 키(Unique)**: 이메일, 휴대폰과 같이 중복되지 않는 열
- **체크(Check)**: 실수로 특정 데이터를 입력하는 것을 방지
- **기본값(Default)**: 동일한 값을 매번 반복적으로 입력하기 귀찮을때 사용
- **NOT NULL**: ID번호와 같이 값을 꼭 입력해야 할 때

**제약조건이 많을수록 테이블의 오류가 적고 견고해진다고 할 수 있다.**

<br/>

## 제약조건의 기본 개념과 종류

**제약조건(constraint)**은 데이터의 무결성을 지키기 위해 제한하는 조건임.
- **데이터의 무결성**: '데이터에 결함이 없음'이란 뜻. 예) 두명의 다른 회원에게 동일한 아이디를 부여하면 상당한 혼란이 일어날 것. 이것을 방지하는게 데이터의 무결성 원칙.
- **기본 키(PK)**: 중복되지 않고 비어있지도 않은 제약조건. 실수로 중복된 아이디를 부여하려 해도 입력 조차 불가능 함.

**제약조건의 종류**
- PK
- FK
- UNIQUE
- CHECK
- DEFAULT
- NULL 값 허용

<br/>

## 기본 키(PK) 제약조건
가장 많이 사용되는 제약 조건. 대부분의 테이블은 기본 키를 가짐.
- 중복 불가능
- NULL 값 불가능
- 1개의 테이블에서 기본 키는 1개의 열만 선택 가능함.
- 통상적으로 ID, 주민등록번호, 휴대폰번호, 또는 Email이 거의 기본 키로 되어있음
- 실무에서 테이블은 대부분 기본 키를 가진다.
- 기본 키로 생성한 것은 자동으로 클러스터형 인덱스가 생성된다.


**PK 지정방법 1** : 열 만들때 바로 지정
```SQL
USE naver_db;
DROP TABLE IF EXISTS buy, member;

CREATE TABLE member ## 회원 테이블 생성
(
mem_id CHAR(8) NOT NULL PRIMARY KEY, ## mem_id열을 PK로 지정
mem_name VARCHAR(10) NOT NULL,
height TINYINT UNSIGNED NULL
);
```

```SQL
DESCIBE member; ## 테이블의 구성 보기
```
<br/>

**PK 지정방법 2**: 열 만들고 가장 밑에 지정 조건 추가
```SQL
DROP TABLE IF EXISTS member;
CREATE TABLE member
(
mem_id CHAR(8) NOT NULL,
mem_name VARCHAR(10) NOT NULL,
height TINYINT UNSIGNED NULL,
PRIMARY KEU (mem_id) ## 지정조건 추가
);
```

<br/>

**PK 지정방법 3**: PK조건 없이 테이블 만들고 ALTER TABLE로 수정하여 PK추가

```SQL
DROP TABLE IF EXISTS member;

## PK없이 테이블 생성
CREATE TABLE member
(
mem_id CHAR(8) NOT NULL,
mem_name VARCHAR(10) NOT NULL,
height TINYINT UNSIGNED NULL,
); 

## ALTER로 수정: PK조건 추가
ALTER TABLE member
  ADD CONSTRAINT
  PRIMARY KEY (mem_id);
```
